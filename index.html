<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Options Profit Calculator</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Simple dark theme and font */
        body {
            background-color: #111827; /* bg-gray-900 */
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for number input arrows to keep UI clean */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
        /* Custom styling for the range slider thumb */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #f9fafb; /* gray-50 */
            border-radius: 50%;
            cursor: pointer;
            margin-top: -6px; /* Center thumb on the track */
        }
        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #f9fafb; /* gray-50 */
            border-radius: 50%;
            cursor: pointer;
        }
    </style>
</head>
<body class="text-gray-200 flex items-center justify-center min-h-screen p-4">

    <main class="w-full max-w-md mx-auto p-6 bg-gray-800 rounded-xl shadow-2xl space-y-4">

        <!-- Title -->
        <h1 class="text-2xl font-bold text-center text-white">Options Profit Calculator</h1>

        <!-- Section 1: Core Inputs -->
        <section class="space-y-4">
            <div>
                <label for="contract-price" class="block text-sm font-medium text-gray-400 mb-1">Contract Price ($)</label>
                <input type="number" id="contract-price" inputmode="decimal" placeholder="e.g., 2.50" step="0.01" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
            </div>
            <div>
                <label for="num-contracts" class="block text-sm font-medium text-gray-400 mb-1">Number of Contracts</label>
                <input type="number" id="num-contracts" inputmode="decimal" value="2" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:outline-none transition">
            </div>
        </section>

        <!-- Horizontal Divider -->
        <hr class="border-gray-700">

        <!-- Section 2: Interactive Calculators -->
        <section class="space-y-4">
            <!-- Take Profit Card -->
            <div class="p-4 bg-gray-900/50 border border-green-500/30 rounded-lg">
                <label class="text-lg font-semibold text-green-400">Take Profit</label>
                <div class="mt-2 text-4xl font-bold text-green-400" id="tp-target-price">$0.00</div>
                <div class="mt-4 space-y-3">
                    <input type="range" id="tp-slider" min="1" max="500" value="30" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                    <div class="flex items-center justify-between gap-2">
                        <input type="number" id="tp-percentage" inputmode="decimal" value="30" class="w-24 p-2 text-center bg-gray-700 border border-gray-600 rounded-md">
                        <div class="flex gap-1">
                            <button data-value="25" class="tp-preset-btn px-2 py-1 text-xs bg-green-500/20 hover:bg-green-500/40 rounded-md transition">25%</button>
                            <button data-value="50" class="tp-preset-btn px-2 py-1 text-xs bg-green-500/20 hover:bg-green-500/40 rounded-md transition">50%</button>
                            <button data-value="100" class="tp-preset-btn px-2 py-1 text-xs bg-green-500/20 hover:bg-green-500/40 rounded-md transition">100%</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stop Loss Card -->
            <div class="p-4 bg-gray-900/50 border border-red-500/30 rounded-lg">
                <label class="text-lg font-semibold text-red-400">Stop Loss</label>
                <div class="mt-2 text-4xl font-bold text-red-400" id="sl-target-price">$0.00</div>
                <div class="mt-4 space-y-3">
                    <input type="range" id="sl-slider" min="1" max="100" value="15" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                    <div class="flex items-center justify-between gap-2">
                        <input type="number" id="sl-percentage" inputmode="decimal" value="15" class="w-24 p-2 text-center bg-gray-700 border border-gray-600 rounded-md">
                        <div class="flex gap-1">
                            <button data-value="10" class="sl-preset-btn px-2 py-1 text-xs bg-red-500/20 hover:bg-red-500/40 rounded-md transition">10%</button>
                            <button data-value="15" class="sl-preset-btn px-2 py-1 text-xs bg-red-500/20 hover:bg-red-500/40 rounded-md transition">15%</button>
                            <button data-value="25" class="sl-preset-btn px-2 py-1 text-xs bg-red-500/20 hover:bg-red-500/40 rounded-md transition">25%</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Section 3: The Analysis -->
        <section class="space-y-2 pt-2">
            <div class="flex justify-between items-center bg-gray-700/50 p-3 rounded-lg">
                <span class="font-medium text-gray-400">Potential P/L:</span>
                <div>
                    <span id="total-profit" class="font-semibold text-green-400">+$0.00</span> /
                    <span id="total-loss" class="font-semibold text-red-400">-$0.00</span>
                </div>
            </div>
            <div class="flex justify-between items-center bg-gray-700/50 p-3 rounded-lg">
                <span class="font-medium text-gray-400">Risk/Reward Ratio:</span>
                <div class="flex items-center gap-2">
                    <span id="rr-ratio" class="font-bold text-white">2:1</span>
                    <span id="rr-quality" class="px-2 py-0.5 text-xs font-semibold rounded-full"></span>
                </div>
            </div>
        </section>

        <!-- Section 4: Utilities -->
        <section>
            <button id="reset-btn" class="w-full py-2.5 text-sm font-semibold text-white bg-gray-600/50 hover:bg-gray-600 rounded-lg transition">Reset</button>
        </section>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 1. SELECT ALL THE ELEMENTS ---
            // Core Inputs
            const contractPriceInput = document.getElementById('contract-price');
            const numContractsInput = document.getElementById('num-contracts');

            // Take Profit Elements
            const tpTargetPriceDisplay = document.getElementById('tp-target-price');
            const tpSlider = document.getElementById('tp-slider');
            const tpPercentageInput = document.getElementById('tp-percentage');
            const tpPresetBtns = document.querySelectorAll('.tp-preset-btn');

            // Stop Loss Elements
            const slTargetPriceDisplay = document.getElementById('sl-target-price');
            const slSlider = document.getElementById('sl-slider');
            const slPercentageInput = document.getElementById('sl-percentage');
            const slPresetBtns = document.querySelectorAll('.sl-preset-btn');

            // Analysis Display
            const totalProfitDisplay = document.getElementById('total-profit');
            const totalLossDisplay = document.getElementById('total-loss');
            const rrRatioDisplay = document.getElementById('rr-ratio');
            const rrQualityDisplay = document.getElementById('rr-quality');

            // Utility
            const resetBtn = document.getElementById('reset-btn');
            
            // --- 2. THE MAIN CALCULATION FUNCTION ---
            function calculate() {
                // Get values and convert to numbers, providing defaults if empty
                const contractPrice = parseFloat(contractPriceInput.value) || 0;
                const numContracts = parseInt(numContractsInput.value) || 0;
                const tpPercentage = parseFloat(tpPercentageInput.value) || 0;
                const slPercentage = parseFloat(slPercentageInput.value) || 0;

                // --- Calculations ---
                // Target Prices
                const tpTargetPrice = contractPrice * (1 + tpPercentage / 100);
                const slTargetPrice = contractPrice * (1 - slPercentage / 100);

                // Total P/L (per contract price * 100 shares/contract * num contracts * percentage)
                const totalProfit = (contractPrice * 100 * numContracts) * (tpPercentage / 100);
                const totalLoss = (contractPrice * 100 * numContracts) * (slPercentage / 100);

                // Risk/Reward Ratio
                let rrRatio = slPercentage > 0 ? tpPercentage / slPercentage : 0;

                // --- 3. UPDATE THE UI ---
                // Format and display target prices
                tpTargetPriceDisplay.textContent = `$${tpTargetPrice.toFixed(2)}`;
                slTargetPriceDisplay.textContent = `$${slTargetPrice.toFixed(2)}`;

                // Format and display total P/L
                totalProfitDisplay.textContent = `+$${totalProfit.toFixed(2)}`;
                totalLossDisplay.textContent = `-$${totalLoss.toFixed(2)}`;

                // Format and display R/R ratio (UPDATED LOGIC)
                const formattedRatio = (rrRatio % 1 === 0) ? rrRatio.toFixed(0) : rrRatio.toFixed(2);
                rrRatioDisplay.textContent = `${formattedRatio}:1`;

                // Update R/R Quality Badge
                rrQualityDisplay.classList.remove('bg-green-500', 'text-green-900', 'bg-blue-500', 'text-blue-900', 'bg-red-500', 'text-red-900');
                if (rrRatio >= 2) {
                    rrQualityDisplay.textContent = 'Excellent';
                    rrQualityDisplay.classList.add('bg-green-500', 'text-green-900');
                } else if (rrRatio >= 1) {
                    rrQualityDisplay.textContent = 'Decent';
                    rrQualityDisplay.classList.add('bg-blue-500', 'text-blue-900');
                } else if (rrRatio > 0) {
                    rrQualityDisplay.textContent = 'Poor';
                    rrQualityDisplay.classList.add('bg-red-500', 'text-red-900');
                } else {
                    rrQualityDisplay.textContent = '';
                }
            }

            // --- 4. SET UP EVENT LISTENERS ---
            // Listen for any input changes
            const inputs = [contractPriceInput, numContractsInput, tpPercentageInput, slPercentageInput, tpSlider, slSlider];
            inputs.forEach(input => input.addEventListener('input', calculate));

            // Sync slider and percentage input for Take Profit
            tpSlider.addEventListener('input', () => tpPercentageInput.value = tpSlider.value);
            tpPercentageInput.addEventListener('input', () => tpSlider.value = tpSlider.value);

            // Sync slider and percentage input for Stop Loss
            slSlider.addEventListener('input', () => slPercentageInput.value = slSlider.value);
            slPercentageInput.addEventListener('input', () => slSlider.value = slSlider.value);

            // Listen for clicks on preset buttons
            tpPresetBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const value = btn.dataset.value;
                    tpPercentageInput.value = value;
                    tpSlider.value = value;
                    calculate();
                });
            });

            slPresetBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const value = btn.dataset.value;
                    slPercentageInput.value = value;
                    slSlider.value = value;
                    calculate();
                });
            });

            // Listen for click on Reset button
            resetBtn.addEventListener('click', () => {
                contractPriceInput.value = '';
                numContractsInput.value = '2';
                tpPercentageInput.value = '30';
                tpSlider.value = '30';
                slPercentageInput.value = '15';
                slSlider.value = '15';
                calculate();
            });

            // --- 5. INITIAL CALCULATION ---
            // Run once on page load to set initial state
            calculate();
        });
    </script>
</body>
</html>
